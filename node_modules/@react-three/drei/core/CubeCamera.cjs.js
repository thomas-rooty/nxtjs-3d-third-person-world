"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("three"),r=require("react"),t=require("@react-three/fiber");function u(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var u=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,u.get?u:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var n=u(r);exports.CubeCamera=function({children:r,fog:u,frames:a=1/0,resolution:c=256,near:o=.1,far:f=1e3,envMap:i,...s}){const l=n.useRef(),[b,g]=n.useState(null),d=t.useThree((({scene:e})=>e)),p=t.useThree((({gl:e})=>e)),m=n.useMemo((()=>{const r=new e.WebGLCubeRenderTarget(c);return r.texture.encoding=p.outputEncoding,r.texture.type=e.HalfFloatType,r}),[c]);let v,O,h=0;return t.useFrame((()=>{b&&l.current&&(a===1/0||h<a)&&(l.current.visible=!1,v=d.fog,O=d.background,d.background=i||O,d.fog=u||v,b.update(p,d),d.fog=v,d.background=O,l.current.visible=!0,h++)})),n.createElement("group",s,n.createElement("cubeCamera",{ref:g,args:[o,f,m]}),n.createElement("group",{ref:l},r(m.texture)))};
